/*
	Proyecto:	FDD
	Archivo:		FDD_FPGA.V
	Descripcion: Descripcion de un Flip Flop D en un FPGA
					 Entrada en serie-Salida en serie
	Asignatura:	DSD
	Prof: 		To√±o
	Equipo:		Luis Gerardo Herrera Avila
*/

module gray
#(
parameter ancho = 3
)
(
	input	clk_i,
	input rst_i,
	input d_i ,
	output [ancho-1:0] resultado
);
reg [ancho-1:0] q;
reg [ancho-1:0] no_ones_below;
reg [ancho-1:0] q_reg;

integer i,j,k;
    always@(posedge clk_i, posedge rst_i)
    begin
        //1=derecha 0= izquierda
        temp_w = {d_i, d_i};
        if(rst_i)
        begin   // 1
            q <= (1'b0),((ancho-1)1'b0);
/*				for i=0;i<=ancho;i<=i+1'b1
					begin   
					q <= 1'b0; // Selecciona los bits desplazados hacia la derecha
					end*/
        end
        else
        begin
            q[ancho-1] <= ~q[ancho-1]; // Selecciona los bits desplazados hacia la izquierda
				for j=0;j<=ancho;j<=j+1'b1
					begin   
					q[j] <= q[j-1]  * (q[j-1]  &no_ones_below[j-1]); // Selecciona los bits desplazados hacia la derecha
					end
				q[ancho] <= q[ancho-1]  * q[ancho-1]  &no_ones_below[ancho-2]; // Selecciona los bits desplazados hacia la derecha
				
        end
        
    end

endmodule